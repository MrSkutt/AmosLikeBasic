{"Version":1,"ProgramText":"GOSUB InitGame\n\nWhile 1\n  GOSUB GetCommand\n  GOSUB ParseCommand\n  GOSUB ExecuteCommand\nWend\n\n\nInitGame:\n  INK #6666FF\n  PAPER BLUE\n\n  room = 1\n  score = 0\n  gameOver = 0\n  maxRooms = 3\n  maxObj = 2\n  lampOn = 0  \n  lampIndex = 2\n\n  Dim roomDesc$(maxRooms)\n  Dim roomDark(maxRooms  \n  Dim north(maxRooms\n  Dim south(maxRooms)\n  Dim east(maxRooms)\n  Dim west(maxRooms)\n  Dim up(maxRooms)\n  Dim down(maxRooms)\n  Dim northKey(maxRooms\n  Dim southKey(maxRooms)\n  Dim eastKey(maxRooms\n  Dim westKey(maxRooms\n  Dim upkey(maxRooms)\n  Dim downkey(maxRooms)\n  Dim northState(maxRooms)\n  Dim southState(maxRooms)\n  Dim eastState(maxRooms)\n  Dim westState(maxRooms)\n  Dim upState(maxRooms)\n  Dim downState(maxRooms)\n  Dim objName$(maxObj)\n  Dim objStatus(maxObj  \n  Dim objRoom(maxObj)\n  Dim objCarry(maxObj)\n\n  RESTORE Room\n  FOR i = 1 TO maxRooms\n      READ roomDesc$(i), north(i), south(i), east(i), west(i), up(i), down(i), northKey(i), southKey(i), eastKey(i), westKey(i), upkey(i), downkey(i), northState(i), southState(i), eastState(i), westState(i), upState(i), downState(i), roomDark(i)\n  NEXT i\n\n\n  RESTORE Object\n  FOR i = 1 TO maxObj\n    READ objName$(i), objRoom(i), objStatus(i)\n    objCarry(i) = 0  \n  NEXT i\n  GOSUB DescribeRoom\nRETURN\n\n\nDescribeRoom:\n  PRINT\n\n  IF (roomDark(room) = 1 AND objStatus(lampIndex) = 0) or (roomDark(room) = 1 AND objCarry(lampIndex) = 0) THEN\n      PRINT \u0022It is too dark to see anything.\u0022\n      RETURN\n  ENDIF\n\n  PRINT roomDesc$(room)\n\n  GOSUB ListObjects\nRETURN\n\n\nListObjects:\n  FOR i = 1 TO maxObj\n    IF objRoom(i) = room \n      PRINT \u0022Here is a \u0022 \u0026 objName$(i) \u0026 \u0022.\u0022\n    ENDIF\n  NEXT i\nRETURN\n\n\nGetCommand:\n  PRINT \n  INPUT \u0022\u003E \u0022,input$\n  input$ = LOWER$(TRIM$(input$))\nRETURN\n\n\nParseCommand:\n  verb$ = WORD$(input$, 1)\n  noun$ = WORD$(input$, 2)\nRETURN\n\n\nExecuteCommand:\n\n  IF verb$ = \u0022\u0022\n    RETURN\n  ENDIF\n\n  IF verb$=\u0022n\u0022 THEN verb$ = \u0022go\u0022 : noun$= \u0022north\u0022\n  IF verb$=\u0022s\u0022 THEN verb$ = \u0022go\u0022 : noun$= \u0022south\u0022\n  IF verb$=\u0022e\u0022 THEN verb$ = \u0022go\u0022 : noun$= \u0022east\u0022\n  IF verb$=\u0022w\u0022 THEN verb$ = \u0022go\u0022 : noun$= \u0022west\u0022\n  IF verb$=\u0022u\u0022 THEN verb$ = \u0022go\u0022 : noun$= \u0022up\u0022\n  IF verb$=\u0022d\u0022 THEN verb$ = \u0022go\u0022 : noun$= \u0022down\u0022\n\n\n  IF verb$ = \u0022look\u0022 or verb$=\u0022l\u0022\n    GOSUB DescribeRoom\n    RETURN\n  ENDIF\n\n  IF verb$ = \u0022open\u0022 THEN\n    GOSUB CmdOpen\n    RETURN\n  ENDIF\n\n  IF verb$ = \u0022close\u0022 THEN\n    GOSUB CmdClose\n    RETURN\n  ENDIF\n\n  IF verb$ = \u0022go\u0022 \n    GOSUB CmdGo\n    RETURN\n  ENDIF\n\n  IF verb$ = \u0022unlock\u0022 THEN\n    GOSUB CmdUnlock\n    RETURN\n  ENDIF\n\n  IF verb$ = \u0022take\u0022 or verb$ = \u0022get\u0022\n    GOSUB CmdTake\n    RETURN\n  ENDIF\n\n  IF verb$ = \u0022drop\u0022 \n    GOSUB CmdDrop\n    RETURN\n  ENDIF\n\n  IF verb$ = \u0022turn\u0022 AND noun$ = \u0022on\u0022 THEN\n    GOSUB CmdTurnOn\n    RETURN\n  ENDIF\n\n  IF verb$ = \u0022turn\u0022 AND noun$ = \u0022off\u0022 THEN\n    GOSUB CmdTurnOff\n    RETURN\n  ENDIF\n\n  IF verb$ = \u0022inventory\u0022 OR verb$ = \u0022i\u0022 \n    GOSUB CmdInventory\n    RETURN\n  ENDIF\n\n  PRINT \u0022I don\u0027t understand.\u0022\nRETURN\n\n\nCmdGo:\n  state = 0\n  requiredKey = 0\n  \n\n  IF noun$ = \u0022north\u0022 THEN\n    newRoom = north(room)\n    requiredKey = northKey(room)\n    state   = northState(room)\n  ENDIF\n\n  IF noun$ = \u0022south\u0022 THEN newRoom = south(room)\n  IF noun$ = \u0022east\u0022 THEN newRoom = east(room)\n  IF noun$ = \u0022west\u0022 THEN newRoom = west(room)\n  IF noun$ = \u0022up\u0022 THEN newRoom = up(room)\n  IF noun$ = \u0022down\u0022 THEN newRoom = down(room)\n\n  IF state = 2 THEN\n    PRINT \u0022The door is locked.\u0022\n    RETURN\n  ENDIF\n\n  IF state = 1 THEN\n    PRINT \u0022The door is closed.\u0022\n    RETURN\n  ENDIF\n\n  IF requiredKey \u003E 0 THEN\n    IF objCarry(requiredKey) = 0 THEN\n      PRINT \u0022The door is locked. You nead \u0022 \u0026 objName$(requiredKey) \u0026 \u0022.\u0022\n      RETURN\n    ENDIF\n  ENDIF\n\n  IF newRoom = 0 THEN\n    PRINT \u0022You cant go \u0022 \u0026 noun$\n  ELSE\n    room = newRoom\n    GOSUB DescribeRoom\n  ENDIF\nRETURN\n\n\nCmdUnlock:\n  IF noun$ = \u0022north\u0022 THEN\n    key = northKey(room)\n    IF northState(room) = 1 THEN\n      PRINT \u0022It is already unlocked.\u0022\n      RETURN\n    ENDIF\n    IF objCarry(key) = 0 THEN\n      PRINT \u0022You need the \u0022 \u0026 objName$(key) \u0026 \u0022.\u0022\n      RETURN\n    ENDIF\n    northState(room) = 1 THEN\n    PRINT \u0022You unlock the door and the key magically disappears into a cloud.\u0022\n    roomDesc$(room) = REPLACE$(roomDesc$(room),\u0022locked\u0022, \u0022closed\u0022)\n    objCarry(key) = 0\n    objRoom(key) = -1\n    RETURN\n  ENDIF\n\n  PRINT \u0022You can\u0027t unlock that.\u0022\nRETURN\n\n\nCmdOpen:\n  IF noun$ = \u0022north\u0022 THEN\n    IF northState(room) = 2\n      PRINT \u0022The door is locked.\u0022\n      RETURN\n    ENDIF\n\n    IF northState(room) = 0 \n      PRINT \u0022It is already open.\u0022\n      RETURN\n    ENDIF\n\n    northState(room) = 0\n    PRINT \u0022You open the door.\u0022\n    roomDesc$(room) = REPLACE$(roomDesc$(room),\u0022closed\u0022, \u0022open\u0022)\n    RETURN\n  ENDIF\n\n  PRINT \u0022You can\u0027t open that.\u0022\nRETURN\n\nCmdClose:\n  IF noun$ = \u0022north\u0022 THEN\n    IF northState(room) = 0 THEN\n      northState(room) = 1\n      PRINT \u0022You close the door.\u0022\n      roomDesc$(room) = REPLACE$(roomDesc$(room),\u0022open\u0022, \u0022closed\u0022)\n      RETURN\n    ENDIF\n  ENDIF\n\n  PRINT \u0022It is already closed.\u0022\nRETURN\n\nCmdTake:\n  IF (roomDark(room) = 1 AND objStatus(lampIndex) = 0) or (roomDark(room) = 1 AND objCarry(lampIndex) = 0) THEN\n      PRINT \u0022It is too dark to see anything.\u0022\n      RETURN\n  ENDIF\n  FOR i = 1 TO maxObj\n    IF objName$(i) = noun$ AND objRoom(i) = room \n      objRoom(i) = -1\n      objCarry(i) = 1\n      PRINT \u0022You take \u0022 \u0026 objName$(i) \u0026 \u0022.\u0022\n      score = score \u002B 5\n      RETURN\n    ENDIF\n  NEXT i\n\n  PRINT \u0022There is no \u0022 \u0026 noun$ \u0026 \u0022 here.\u0022\nRETURN\n\n\n\nCmdDrop:\n  FOR i = 1 TO maxObj\n    IF objName$(i) = noun$\n      objRoom(i) = room\n      objCarry(i) = 0\n      PRINT \u0022You drop \u0022 \u0026 objName$(i) \u0026 \u0022.\u0022\n      score = score \u002B 5\n      RETURN\n    ENDIF\n  NEXT i\n\n  PRINT \u0022There is no \u0022 \u0026 noun$ \u0026 \u0022 here.\u0022\nRETURN\n\nCmdInventory:\n  found = 0\n  FOR i = 1 TO maxObj\n    IF objCarry(i) = 1 \n      PRINT \u0022- \u0022 \u0026 objName$(i)\n      found = 1\n    ENDIF\n  NEXT i\n\n  IF found = 0 THEN PRINT \u0022You are not wearing anything.\nRETURN\n\nCmdTurnOn:\n  IF objCarry(lampIndex) = 0 THEN\n    PRINT \u0022You do not have the flashlight.\u0022\n  ELSE\n    objStatus(lampIndex) = 1  \n    objName$(lampIndex) = \u0022flashlight\u0022\n    PRINT \u0022You turn on the flashlight.\u0022\n    GOSUB DescribeRoom\n  ENDIF\nRETURN\n\n\nCmdTurnOff:\n  IF objCarry(lampIndex) = 0 THEN\n    PRINT \u0022You do not have the flashlight.\u0022\n  ELSE\n    objStatus(lampIndex) = 1  \n    objName$(lampIndex) = \u0022flashlight\u0022\n    PRINT \u0022You turn on the flashlight.\u0022\n  ENDIF\nRETURN\n\n\nRoom:\nDATA \u0022You are standing in a small hall.\\r\\nThere\u0027s an locked door to the north and an staircase going up.\u0022,2,0,0,0,3,0,1,0,0,0,0,0,2,0,0,0,0,0,0\nDATA \u0022You\u0027re in a kitchen. It smells strange.\u0022,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\nDATA \u0022You went up the creaking stairs and stand in an small hall.\u0022,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1\n\nObject:\nDATA \u0022key\u0022,3,0\nDATA \u0022flashlight\u0022,1,0\n","ScreenWidth":640,"ScreenHeight":480,"Sprites":[],"MapWidth":1,"MapHeight":1,"MapData":[-1]}