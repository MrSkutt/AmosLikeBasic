<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1100" d:DesignHeight="720"
        x:Class="AmosLikeBasic.MainWindow"
        Title="AMOS Professional IDE"
        Background="#00134D"
        Width="1024" Height="768" 
        WindowStartupLocation="CenterScreen">
    <DockPanel>

        <!-- Top Menu -->
        <Menu Name="TopMenu" DockPanel.Dock="Top" Focusable="False">
            <MenuItem Header="_Project">
                <MenuItem Header="New" Click="NewProject_OnClick"/>
                <MenuItem Header="Open..." Click="OpenProject_OnClick"/>
                <Separator/>
                <MenuItem Header="Exit"/>
            </MenuItem>
            <MenuItem Header="_Edit">
                <MenuItem Header="Cut"/>
                <MenuItem Header="Copy"/>
                <MenuItem Header="Paste"/>
            </MenuItem>
            <MenuItem Header="_View">
                <MenuItem Header="Toggle Fullscreen (F11)" Click="ToggleFullscreen_OnClick"/>
                <MenuItem Header="Reset Layout"/>
            </MenuItem>
            <MenuItem Header="_Help">
                <MenuItem Header="About"/>
            </MenuItem>
        </Menu>

        <Border Name="AmosTitleBar" DockPanel.Dock="Top" Background="#FFD400" Height="30" VerticalAlignment="Top">
            <Grid ColumnDefinitions="Auto, *, Auto">
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="10" Margin="10,0">
                    <TextBlock Text="AMOS Professional" Foreground="Black" FontWeight="Bold" VerticalAlignment="Center"/>
                    <TextBlock Text="v1.0" Foreground="#666" VerticalAlignment="Center" FontSize="10"/>
                </StackPanel>
                <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="20" Margin="10,0">
                    <TextBlock Text="640x480" Foreground="Black" VerticalAlignment="Center" FontSize="12"/>
                    <TextBlock Text="FREE: 512 KB" Foreground="Black" VerticalAlignment="Center" FontSize="12"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Toolbar -->
        <Border Name="ToolbarBorder" DockPanel.Dock="Top" Background="#0A2D8F" Padding="5" BorderBrush="#7FB2FF" BorderThickness="0,0,0,2">
            <StackPanel Orientation="Horizontal" Spacing="10">
                <Button x:Name="RunButton" Classes="amos-button" Content="[ RUN ]" Background="#00CC00" Foreground="White" Click="RunButton_OnClick"/>
                <Button x:Name="StopButton" Classes="amos-button" Content="[ STOP ]" Background="#CC0000" Foreground="White" Click="StopButton_OnClick" IsEnabled="False"/>
                <Separator Background="#7FB2FF" Width="2"/>
                <Button Classes="amos-button" Content="LOAD" Click="OpenProject_OnClick" Background="#0A2D8F" Foreground="White"/>
                <Button Classes="amos-button" Content="SAVE" Click="SaveProject_OnClick" Background="#0A2D8F" Foreground="White"/>
                <Separator Background="#7FB2FF" Width="2"/>
                <Button Classes="amos-button" Content="SPRITES" Click="SpritesButton_OnClick" Background="#0A2D8F" Foreground="White"/>
                <Button Classes="amos-button" Content="MAP" Click="MapButton_OnClick" Background="#0A2D8F" Foreground="White"/>
                <Button Classes="amos-button" Content="CONSOLE" Click="ToggleConsole_OnClick" Background="#0A2D8F" Foreground="White"/>
            </StackPanel>
        </Border>

        <!-- Main Workspace -->
<!-- ... existing code (Top Bar and Toolbar remain the same) ... -->
        <!-- Main Workspace -->
        <Grid>
            <TabControl x:Name="MainTabs" BorderThickness="0" Padding="0">
                <TabItem Header="[ EDITOR ]" Foreground="#7FB2FF" FontWeight="Bold">
                    <Grid RowDefinitions="*, 4, 150">
                        <TextBox Grid.Row="0" x:Name="Editor" Classes="amos-editor" AcceptsReturn="True" BorderThickness="0" Padding="10"/>
                        <GridSplitter Grid.Row="1" Background="#7FB2FF" ResizeDirection="Rows" HorizontalAlignment="Stretch"/>
                        
                        <!-- Denna används för systemmeddelanden -->
                        <Border Grid.Row="2" Background="#000A26" BorderBrush="#7FB2FF" BorderThickness="0,2,0,0">
                            <TextBox x:Name="LogBox" 
                                     Foreground="#7FB2FF"
                                     Background="Transparent"
                                     IsReadOnly="True"
                                     FontSize="12"
                                     FontFamily="Courier New"
                                     BorderThickness="0"/>
                        </Border>
                    </Grid>
                </TabItem>

                <!-- Screen Tab -->
                <TabItem Header="[ SCREEN ]" Foreground="#7FB2FF" FontWeight="Bold">
                    <Grid Background="Black" ClipToBounds="True"> <!-- ClipToBounds tar bort spill -->
                        <Viewbox Stretch="Uniform">
                            <Grid Width="640" Height="480" Background="Black">
                                <Image x:Name="ScreenImage" 
                                       Focusable="True" 
                                       Stretch="Fill"
                                       RenderOptions.BitmapInterpolationMode="None"/>
                                
                                
                                <!-- Denna används för BASIC PRINT-kommandon -->
                                <TextBox x:Name="Console" 
                                         Classes="amos-console" 
                                         Background="Transparent" 
                                         Foreground="White"
                                         IsHitTestVisible="False"
                                         IsReadOnly="True"
                                         BorderThickness="0"
                                         Margin="0"
                                         Padding="0"
                                         VerticalAlignment="Stretch"
                                         HorizontalAlignment="Stretch"/>
                            </Grid>
                        </Viewbox>
                    </Grid>
                </TabItem>
            </TabControl>
        </Grid>
    </DockPanel>
</Window>